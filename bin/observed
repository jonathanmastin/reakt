#!/usr/bin/env node

var commander = require('commander');
var observe = require('../lib');

commander.version('0.0.1')
  .usage('[options] <command>')
  .description('tool for observing file directories and acting on change')
  .option('-g, --grep [pattern]', 'run <command> when files matching [pattern] change')
  .option('-v, --invert [pattern]', 'do not run <command> if files matching [pattern] change')
  .parse(process.argv);

var cwd = process.cwd();
var command = commander.args.join(' ');
var options = {
  longRunning: true,
  exclude: commander.invert,
  include: commander.grep
};

observe(cwd, command, options).start();
